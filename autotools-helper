#! /usr/bin/perl -w


use strict;
&{
   ${{
      init => sub {
         if (-e "Makefile.am") {
            die "Makefile.am already exists - remove it first";
         }
         open OUT, '>', "Makefile.am" or die $!;
         print OUT "# Skeleton generated by $0\n"
            , "# Hint: Replace \"program\" by the name "
            , "of the executable.\n"
            , "# Replace \"program_src_1.cpp\" by the list "
            , "of your source files.\n"
            , "bin_PROGRAMS = program\n"
            , "program_SOURCES = program_src_1.cpp\n"
         ;
         close OUT or die $!;
      }
   }}{$ARGV[0] || "help"}
   or sub {
      print "Usage: $0 <command> <arguments ...>\n"
         , "Commands:\n"
         , "help: Display this information.\n"
         , "bump: Increment minor version number in 'AC_INIT'.\n"
         , "sync: Synchronize file list in 'Makefile.am'.\n"
         , "list: Show current file list but don't sync.\n"
         , "include: Add glob pattern to include files.\n"
         , "exclude: Add glob pattern to exclude files.\n"
         , "init: Create skeleton Makefile.am.\n"
      ;
   }
};
